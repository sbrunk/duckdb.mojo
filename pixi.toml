[project]
authors = ["SÃ¶ren Brunk <soeren@brunk.io>"]
channels = ["conda-forge", "https://conda.modular.com/max/"]
description = "DuckDB bindings for Mojo"
name = "duckdb.mojo"
platforms = ["osx-arm64", "linux-64"]
version = "0.1.0"

[tasks]
#test = { cmd = "mojo test -I $PIXI_PROJECT_ROOT", env = { DYLD_LIBRARY_PATH = "$CONDA_PREFIX/lib", LD_LIBRARY_PATH = "$CONDA_PREFIX/lib" }, cwd = "test" }
test = "mojo test"
# Build the helper C shim that wraps struct-by-value functions for Mojo.
build-helpers-macos = "cc -shared -fPIC duckdb_mojo_helpers.c -I$CONDA_PREFIX/include -L$CONDA_PREFIX/lib -lduckdb -o libduckdb_mojo_helpers.dylib"
build-helpers-linux = "cc -shared -fPIC duckdb_mojo_helpers.c -I$CONDA_PREFIX/include -L$CONDA_PREFIX/lib -lduckdb -o libduckdb_mojo_helpers.so"

[dependencies]
libduckdb = ">=1.3.2,<2"
mojo = ">=0.25.6.0,<1.0.0"
